<div class="home-page">
    <!-- Hero Section -->
    <!-- Hero Section -->
    <!-- Hero Section -->
    <app-hero (viewMap)="toggleView()"></app-hero>

    <div id="home-map" [class.hidden]="!showMap"></div>

    <!-- Featured Properties -->
    <section class="featured-section container">
        <div class="section-header">
            <div>
                <h2>Featured Properties</h2>
                <p class="subtitle">Handpicked for you by our AI based on your preferences</p>
            </div>
            <a [routerLink]="['/properties']" class="view-all">View All</a>
        </div>

        <div class="property-grid">
            <div *ngFor="let property of featuredProperties" class="property-card">
                <div class="card-image">
                    <img [src]="getPropertyImage(property)" alt="{{ property.title }}"
                        onerror="this.src='assets/placeholder.webp'">
                    <div class="badge" [class.available]="property.isAvailable">
                        {{ property.isAvailable ? 'Available' : 'Rented' }}
                    </div>

                    <!-- Redesigned AI Insight Banner -->
                    <div *ngIf="property.predictedPrice" class="ai-insight-integrated"
                        [title]="'AI Market Analysis: ' + property.predictedPrice.price_eth + ' ETH'">
                        <div class="ai-glow"></div>
                        <svg class="ai-icon-neural" xmlns="http://www.w3.org/2000/svg" width="14" height="14"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 2v8"></path>
                            <path d="m4.93 10.93 1.41 1.41"></path>
                            <path d="M2 18h2"></path>
                            <path d="M20 18h2"></path>
                            <path d="m19.07 10.93-1.41 1.41"></path>
                            <path d="M22 22H2"></path>
                            <path d="m8 22 4-10 4 10"></path>
                        </svg>
                        <span class="ai-label">Smart Value</span>
                        <span class="ai-price">{{ property.predictedPrice.price_eth | number:'1.4-4' }}
                            <span>ETH</span></span>
                    </div>
                    <div class="price-tag">
                        {{ property.rentAmount | currency:'USD':'symbol':'1.0-0' }}<span>/mo</span>
                    </div>
                </div>

                <div class="card-content">
                    <div class="type">{{ property.typeOfRental === 'MONTHLY' ? 'Long Term' : 'Short Term' }}</div>
                    <h3>{{ property.title }}</h3>
                    <p class="location">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                            <circle cx="12" cy="10" r="3"></circle>
                        </svg>
                        {{ property.city }}, {{ property.country }}
                    </p>

                    <div class="card-footer">
                        <button class="btn-details" [routerLink]="['/properties', property.idProperty]">View
                            Details</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Value Proposition Section -->
    <app-features-section></app-features-section>

    <!-- Popular Destinations (NEW) -->
    <app-popular-destinations></app-popular-destinations>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <div class="cta-card owner">
                <h3>Become an Owner</h3>
                <p>List your property and earn passive income with crypto payments.</p>
                <button class="btn-cta">List Property</button>
            </div>
            <div class="cta-card tenant">
                <h3>How it Works</h3>
                <p>Learn about our secure blockchain-based rental process.</p>
                <button class="btn-cta outline">Learn More</button>
            </div>
        </div>
    </section>

    <!-- Platform Statistics (NEW) -->
    <app-platform-stats></app-platform-stats>

    <!-- Footer (NEW) -->
    <app-footer></app-footer>
</div>